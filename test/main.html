<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">

  <!-- MAIN IMPORTS -->
  <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
  <script src="../node_modules/web-component-tester/browser.js"></script>

  <script src="test-fixture.js"></script>
  <!-- COMPONENT TO TEST -->
  <script src="element-bundle.js" async></script>
</head>

<body>

  <test-fixture id="twitterTimeline">
    <template>
      <twitter-timeline data-widget-id="670001400336752641"></twitter-timeline>
    </template>
  </test-fixture>


  <script>
    suite('<twitter-timeline>', () => {
      let twitterTimeline;

      setup(() => {
        twitterTimeline = fixture('twitterTimeline');
      });

      suite('Test Properties', () => {
        test('Default Properties', () => {
          assert.isUndefined(twitterTimeline.Twtt, "Twtt undefined on-load");
          assert.equal(twitterTimeline.uniqueId, "twitterTimelinePolymerLibLoader", "Correct uniquerid");
          assert.equal(twitterTimeline.dataWidgetId, "670001400336752641","Correct dataWidgetId onload");
          assert.isObject
          (twitterTimeline.size, "size is object onload");
          assert.equal(twitterTimeline.size.width, "400")
          assert.equal(twitterTimeline.size.height, "400")
        });

        test('Initialization timeline', done => {
          twitterTimeline.addEventListener('timeline-loaded', evt => {
            assert.isObject(twitterTimeline.Twtt, "Correct initialization library");
            done();
          })
        });
      });

      suite('Test Methods', () => {
        test('removeTimeline()', done => {
          twitterTimeline.addEventListener('timeline-loaded', evt => {
            assert.ok(twitterTimeline.$.timeline.querySelector('iframe'));
            twitterTimeline.removeTimeline();
            assert.isNull(twitterTimeline.$.timeline.querySelector('iframe'))
            done();
          })
        });
      });

    });
  </script>
</body>

</html>
